# 调用栈：为什么JavaScript代码会出现栈溢出？

哪些情况下代码才算是“一段”代码，才会在执行之前就进行编译并创建执行上下文  
1. 当JavaScript执行全局代码的时候，会编译全局代码并创建全局执行上下文，而且在整个页面的生存周期内，全局执行上下文只有一份。
2. 当调用一个函数的时候，函数体内的代码会被编译，并创建函数执行上下文，一般情况下，函数执行结束后，创建的函数执行上下文会被销毁
3. 当使用eval函数的时候，eval的代码也会被编译，并创建执行上下文。

## 调用栈
调用栈就是用来管理函数调用关系的一种数据结构。
### 函数调用
```
var a = 2
function add(){
var b = 10
return  a+b
}
add()

```
![](img/全局执行上下文.png)  

代码中全局变量和函数都保存在全局上下文的变量环境中。  
![](img/函数调用过程.png)

### javascript的调用栈
在执行上下文创建好后，JS引擎会将执行上下文压入栈中，通常把这种用来管理执行上下文的栈称为**执行上下文栈**，又称调用栈

## 栈溢出(Stack Overflow)
**调用栈是有大小的**，当入栈的执行上下文超过一定数目，JavaScript引擎就会报错，这种错误就是**栈溢出**